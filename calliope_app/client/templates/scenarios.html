{% extends 'configure.html' %}
{% load static %}
{% load i18n %}

{% block head %}
<title>Engage | {{ model.name }} | Scenarios</title>
<script type="text/javascript" src="{% static 'js/scenarios.js' %}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.6.0/split.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript">
    // Maybe move somewhere else to another file. To examine during code review
    $(document).ready(function() {
      Split(['#left-panel', '#right-panel'], {});
      $(document).on('mouseup', function() {
        if (typeof map !== 'undefined') {
          map.resize();
        }
      });
    });
</script>
<style>
    html, body {
      height: 100%;
      overflow: hidden;
    }
    .splittable {
      display: flex;
      flex-direction: row;
    }
    .gutter {
      width: 10px;
      height: 100%;
      background-color: #137ac2;
      background-repeat: no-repeat;
      background-position: 50%;
    }
    .gutter.gutter-horizontal {
      background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==');
      cursor: col-resize;
    }
    .left-panel {
      min-width: 30vw;
    }
    .right-panel {
      max-width: calc(70vw - 10px);
    }

</style>
{% endblock %}

{% block config_scenarios %}<h5><i class="fas fa-code-branch"></i>&nbsp;&nbsp;<b>Scenarios</b></h5>{% endblock %}
{% block config_4_sync %}<i class="fas fa-sync"></i>{% endblock %}
{% block config_4_tab %}tab-active{% endblock %}

{% block content %}
<div id="subheader2" class="row content_navigation">
	{% include "scenario_selector.html" %}
</div>
<div style="height: calc(100% - 160px);">
    <div class="splitter_upper row splittable" style="height: 50%;">
      <!-- Scenario -->
      <div id="left-panel" class="left-panel">
        {% include "scenarios_details.html" %}
        <!-- https://getbootstrap.com/docs/4.0/components/modal/ take out in PR -->
        <button id="master-settings" type="button" class="btn btn-sm btn-warning" data-toggle="modal" data-target="#exampleModal">
          {% trans "Settings" %}
        </button>
        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Model Settings</h5>
                <button type="button" id="master-cancel" class="close btn-warning" style="color: #dc3545;" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <!-- This is where the form should be -->
                <div style="width: 100%;" id="scenario_settings">
                  <div style="color:red" class="col-12 centered"><br>{% trans "Oops, an error occurred" %}.<br><br></div>
                </div>
              </div>
              <div class="modal-footer">
                <button id="master-cancel" type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary btn-warning">Save changes</button>
              </div>
            </div>
          </div>
        </div>
				{% if model %}  
				{% endif %}
      </div>
      <div id="right-panel" class="right-panel">
        {% include "map_container_resizable.html" %}
      </div>
    </div>
    <!-- Splitter -->
    {% include "splitter.html" %}
    <!-- Dashboard -->
    <div id="scenarios_dashboard" class="splitter_lower row" style="overflow-y: scroll; height: 50%;">
      <form style="width: 100%;" id="form_scenario_settings" class="hide" method="post" action="" accept-charset="utf-8">
          <div style="width: 100%;" id="scenario_settings">
              <div style="color:red" class="col-12 centered"><br>{% trans "Oops, an error occurred" %}.<br><br></div>
          </div>
      </form>
      <div style="width: 100%" id="scenario_configuration"></div>
  </div>
</div>
</div>
{% endblock %}

